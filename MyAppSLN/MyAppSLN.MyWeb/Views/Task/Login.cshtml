
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Login</h2>

<form class="form-horizontal">
    <fieldset>
        <div class="form-group">
            <label for="inputEmail" class="col-lg-2 control-label">Email</label>
            <div class="col-lg-10">
                <input id="UserName" name="UserName" type="text" class="form-control" placeholder="User Name">
            </div>
        </div>
        <div class="form-group">
            <label for="inputPassword" class="col-lg-2 control-label">Password</label>
            <div class="col-lg-10">
                <input id="Password" name="Password" type="password" class="form-control" placeholder="Password">
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-10 col-lg-offset-2">
                <button id="btn_Login" name="btn_Login" type="submit" class="btn btn-primary">Login</button>
            </div>
        </div>
    </fieldset>
</form>
@section scripts{
    <script>

        $("#btn_Login").click(function (e) {

            //-----------------------------------------------------------------------------------------------------
            e.preventDefault();
            //-----------------------------------------------------------------------------------------------------
            var userName = $("#UserName").val();
            var password = $("#Password").val();
            //-----------------------------------------------------------------------------------------------------
            $.ajax({
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                url: "http://localhost:51986/ApplicationTask/User/Login?userName=" + userName + "&password=" + password + "",
                headers: {
                    'Authorization': 'Basic ' + btoa(userName + ':' + password)
                },
                success: function (data, textStatus, xhr) {
                    sessionStorage.setItem("accessToken", data);
                    window.location.href = '/Task/Index';
                },
                error: function (xhr) {
                }
            });
        });

    </script>


}

